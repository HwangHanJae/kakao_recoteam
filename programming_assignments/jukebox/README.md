# Jukebox

- 문제 출제 및 검수: lucas.ii
- 해설 작성자: iggy.ll

> 이 문서에는 Jukebox 문제의 요약과 간단한 설명이 덧붙여져 있습니다. **문제 원문은 [jukebox.pdf](jukebox.pdf) 문서에 있습니다.**  
> 문제에 대한 해설과 풀이는 [solution](solution/) 디렉토리를 참고해주세요.

## 1. 문제 설명

사용자의 성향을 고려해 각 사용자가 좋아할 음악을 추천하는 추천 시스템을 만들고자 합니다. 각 사용자가 들었던 음악과 그 음악을 들은 횟수가 입력으로 주어집니다. 임의의 Collaborative Filtering 알고리즘을 구현해, 추천 시스템을 구현하고 이를 오프라인으로 평가하는 것입니다.

## 2. 실험에 필요한 데이터

### `listen_count.txt`

각 유저가 어떤 음악을 몇 번 들었는가를 표현하는 데이터입니다. `<user_id>`, `<music_id>`, `<count>`가 공백을 기준으로 구분되어 있습니다.

예시:

```text
18091 6716 3
15772 1251 1
...
```

### `test_data.txt`

평가 데이터는 미리 주어지지 않습니다. 제출하기 이전에, 이 데이터를 임의로 학습 데이터, 테스트 데이터로 나눈 뒤, validation을 수행하기를 권장합니다.
평가 데이터의 형식은 다음과 같습니다. 평가 데이터에서, 각 유저마다 유저가 실제로 들은 아이템의 수는 다를 수 있습니다.

```text
$ cat test_data.txt
15772 3663 2151
3759 2554 1151 3399
...
```

### 3. 추천 성능 평가

추천 성능의 평가 기준은 NDCG@100입니다. 주어진 데이터에서 가장 청취 회수가 많은 곡 100개를 유저에게 추천했을 때의 NDCG@100는 0.1입니다. 제출한 결과물은 평가 데이터에서 평가했을 때, NDCG@100이 0.2보다 크기를 기대합니다.

### 4. 수행 과정

#### `train`

- 주어진 데이터(listen_count.txt)를 이용해 추천 모델을 생성합니다.
- 모델을 생성하지 않는 경우, 이 과정을 생락하셔도 좋습니다.

실행 방법: `./train <input file> <output model>`
e.g., `./train listen_count.txt my_model`

#### `recommend`

`train`에서 학습한 아웃풋 모델을 이용해, 유저 아이디가 주어졌을 때의 추천을 K개 생성합니다.`train` 과정을 생략한 경우, `<input file>`을 여기서 사용해도 좋습니다. 입력에 쓰이는 `user_id.txt`는 각 라인마다 유저 아이디를 담고 있는 파일입니다.

user_id.txt의 예시:

```text
15722
2716
3759
```

실행 방법: `./recommend <input file> user_id.txt <K>`
e.g., `./recommend my_model user_id.txt 100`
e.g., `./recommend listen_count.txt user_id.txt 100`

```text
$ ./recommend my_model user_id .txt 5
15772 201 200 1819 215 203
2716 514 184 1235 1184 1752
3759 514 534 1249 6341 4623
```

결과 형식은: 각 줄의 첫 번째 단어는 유저의 아이디, 이후 K개 단어는 각각 유저에게 추천되는 K개의 아이템 아이디입니다.

`15772 201 200 1819 215 203`

이 라인은, 유저 15772가 201 200 1819 215 203를 순서대로 좋아할 것라는 의미입니다.

#### `evaluate`

`recommend`에서 생성한 추천과, test data를 비교해 추천의 NDCG@100 성능을 평가합니다. test data는 다음과 같은 형태입니다. 각 줄의 첫 번째 단어는 유저의 아이디이며, 각 줄의 나머지 단어는 유저가 실제로 들은 아이템의 리스트입니다. 평가 데이터에서, 각 유저마다 유저가 실제로 들은 아이템의 수는 다를 수 있습니다.

```text
$ cat test_data.txt
15772 3663 2151
3759 2554 1151 3399
...
```

### 5. 제약 조건

- 8core, 8GB 머신에서 전체 수행 시간 20분 이내에 추천을 생성할 수 있어야 합니다.
- 채점의 용이성을 위해 C, C++, Python, C#, Java, Scala 중 하나의 언어를 사용하기를 권장하지만 다른 언어 사용을 원하는 경우 사전에 협의 가능합니다.
- 오픈소스로 추천 라이브러리, 혹은 머신 러닝 라이브러리를 사용할 수 있습니다.

### 6. 제출 파일

1. 구현 코드
1. 구현한 방법에 대한 간단한 설명과 실험 결과 리포트
1. 구현 코드를 실행하는 방법에 대한 설명
1. 실험에 사용한 학습/평가 데이터와, 모델을 생성했다면 생성한 모델

### 7. 평가 기준

- 제약 조건 이내에 컴파일 후 추천을 생성할 수 있는지
- 생성된 추천의 NDCG@100
- 사용한 알고리즘과 그 알고리즘에 대한 이해도
- 코드를 효율적이고 이쁘게 구현하였는지.

### Note

- NDCG@100 점수가 유일한 평가 기준은 아닙니다. 어떤 모델을 사용하기로 선택했는지에 따라 NDCG@100이 크게 달라질 수 있기 때문입니다. 추천 시스템에 대한 경험이 많으면 우수한 모델을 쉽게 선택하고, 좋은 오픈 소스 구현체들을 손쉽게 가져올 수 있기도 합니다.
- 직접 모델을 구현하는 경우, 추천 알고리즘을 제한 시간 이내에 올바르게 생성하는 코드를 효율적으로 구현하는 것이 오픈 소스를 사용하는 경우 모델 선택을 한 방법과 이유, 그리고 실험 설계와 평가를 얼마나 논리적으로 수행했는가가 채점에서 중요한 요소가 됩니다.
